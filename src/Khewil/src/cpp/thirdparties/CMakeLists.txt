cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(khewil-thirdparties)

add_custom_target(
	khewil-thirdparty-sqlite-build
	COMMAND
		"${CMAKE_COMMAND}"
		-D "KHEWIL_TOOL_CURL=${KHEWIL_TOOL_CURL}"
		-D "KHEWIL_TOOL_ZIP=${KHEWIL_TOOL_ZIP}"
		-D "KHEWIL_THIRDPARTIES_SRC_ZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_ZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_INSTALL_DIR=${KHEWIL_THIRDPARTIES_INSTALL_DIR}"
		-D "KHEWIL_THIRDPARTIES_CACHE_DIR=${KHEWIL_THIRDPARTIES_CACHE_DIR}"
		-D "KHEWIL_SQLITE_SRC_NAMEVERSION=sqlite-amalgamation-3090100"
		-D "KHEWIL_SQLITE_INSTALL_NAMEVERSION=sqlite-3.9.1"
		-P "${KHEWIL_CMAKE_DIR}/script.build-thirdparty-sqlite.cmake"
	)

add_custom_target(
	khewil-thirdparty-boost-build
	COMMAND
		"${CMAKE_COMMAND}"
		-D "KHEWIL_TOOL_CURL=${KHEWIL_TOOL_CURL}"
		-D "KHEWIL_TOOL_ZIP=${KHEWIL_TOOL_ZIP}"
		-D "KHEWIL_THIRDPARTIES_SRC_ZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_ZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_INSTALL_DIR=${KHEWIL_THIRDPARTIES_INSTALL_DIR}"
		-D "KHEWIL_THIRDPARTIES_CACHE_DIR=${KHEWIL_THIRDPARTIES_CACHE_DIR}"
		-D "KHEWIL_BOOST_SRC_NAMEVERSION=boost_1_59_0"
		-D "KHEWIL_BOOST_INSTALL_NAMEVERSION=boost-1.59.0"
		-P "${KHEWIL_CMAKE_DIR}/script.build-thirdparty-boost.cmake"
	)

add_custom_target(
	khewil-thirdparty-protobuf-build
	COMMAND
		"${CMAKE_COMMAND}"
		-D "CMAKE_GENERATOR=${CMAKE_GENERATOR}"
		-D "KHEWIL_TOOL_CURL=${KHEWIL_TOOL_CURL}"
		-D "KHEWIL_TOOL_ZIP=${KHEWIL_TOOL_ZIP}"
		-D "KHEWIL_THIRDPARTIES_SRC_ZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_ZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_INSTALL_DIR=${KHEWIL_THIRDPARTIES_INSTALL_DIR}"
		-D "KHEWIL_THIRDPARTIES_CACHE_DIR=${KHEWIL_THIRDPARTIES_CACHE_DIR}"
		-D "KHEWIL_PROTOBUF_SRC_NAMEVERSION=protobuf-3.0.0-beta-1"
		-D "KHEWIL_PROTOBUF_INSTALL_NAMEVERSION=protobuf-3.0.0-beta-1"
		-P "${KHEWIL_CMAKE_DIR}/script.build-thirdparty-protobuf.cmake"
	)

add_custom_target(
	khewil-thirdparty-zeromq-build
	COMMAND
		"${CMAKE_COMMAND}"
		-D "CMAKE_MAKE_PROGRAM=${CMAKE_MAKE_PROGRAM}"
		-D "KHEWIL_TOOL_CURL=${KHEWIL_TOOL_CURL}"
		-D "KHEWIL_TOOL_ZIP=${KHEWIL_TOOL_ZIP}"
		-D "KHEWIL_THIRDPARTIES_SRC_ZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_ZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_INSTALL_DIR=${KHEWIL_THIRDPARTIES_INSTALL_DIR}"
		-D "KHEWIL_THIRDPARTIES_CACHE_DIR=${KHEWIL_THIRDPARTIES_CACHE_DIR}"
		-D "KHEWIL_ZEROMQ_SRC_NAMEVERSION=zeromq-4.1.3"
		-D "KHEWIL_ZEROMQ_INSTALL_NAMEVERSION=zeromq-4.1.3"
		-P "${KHEWIL_CMAKE_DIR}/script.build-thirdparty-zeromq.cmake"
	)

find_package(BOOST)

add_custom_target(
	khewil-thirdparty-mongo-build
	COMMAND
		"${CMAKE_COMMAND}"
		-D "KHEWIL_TOOL_SCONS=${KHEWIL_TOOL_SCONS}"
		-D "KHEWIL_TOOL_CURL=${KHEWIL_TOOL_CURL}"
		-D "KHEWIL_TOOL_ZIP=${KHEWIL_TOOL_ZIP}"
		-D "KHEWIL_THIRDPARTIES_SRC_ZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_ZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_INSTALL_DIR=${KHEWIL_THIRDPARTIES_INSTALL_DIR}"
		-D "KHEWIL_THIRDPARTIES_CACHE_DIR=${KHEWIL_THIRDPARTIES_CACHE_DIR}"
		-D "KHEWIL_MONGO_SRC_NAMEVERSION=mongo-cxx-driver-legacy-1.0.7"
		-D "KHEWIL_MONGO_INSTALL_NAMEVERSION=mongo-cxx-driver-legacy-1.0.7"
		-D "BOOST_INCLUDES=${BOOST_INCLUDES}"
		-D "BOOST_LIBRARIES=${BOOST_LIBRARIES}"
		-P "${KHEWIL_CMAKE_DIR}/script.build-thirdparty-mongo.cmake"
	)

find_package(SQLITE)

add_custom_target(
	khewil-thirdparty-soci-build
	COMMAND
		"${CMAKE_COMMAND}"
		-D "CMAKE_GENERATOR=${CMAKE_GENERATOR}"
		-D "KHEWIL_TOOL_CURL=${KHEWIL_TOOL_CURL}"
		-D "KHEWIL_TOOL_ZIP=${KHEWIL_TOOL_ZIP}"
		-D "KHEWIL_THIRDPARTIES_SRC_ZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_ZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR=${KHEWIL_THIRDPARTIES_SRC_UNZIP_DIR}"
		-D "KHEWIL_THIRDPARTIES_INSTALL_DIR=${KHEWIL_THIRDPARTIES_INSTALL_DIR}"
		-D "KHEWIL_THIRDPARTIES_CACHE_DIR=${KHEWIL_THIRDPARTIES_CACHE_DIR}"
		-D "KHEWIL_SOCI_SRC_NAMEVERSION=soci-3.2.3"
		-D "KHEWIL_SOCI_INSTALL_NAMEVERSION=soci-3.2.3"
		-D "BOOST_INCLUDES=${BOOST_INCLUDES}"
		-D "BOOST_LIBRARIES=${BOOST_LIBRARIES}"
		-D "SQLITE_ROOT=${SQLITE_ROOT}"
		-D "SQLITE_INCLUDES=${SQLITE_ROOT}/inc/sqlite"
		-D "SQLITE_LIBRARIES=${SQLITE_INCLUDES}"
		-P "${KHEWIL_CMAKE_DIR}/script.build-thirdparty-soci.cmake"
	)
