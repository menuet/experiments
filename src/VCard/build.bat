
set "CONAN_ARCH=x86_64"
set "CONAN_BUILD_TYPE=Release"
set "CONAN_COMPILER=Visual Studio"
set "CONAN_COMPILER_RUNTIME=MD"
set "CONAN_COMPILER_VERSION=14"

set "ROOT_DIR=%~dp0"
set "BUILD_DIR=%ROOT_DIR%build"
set "VARIANT_DIR=%BUILD_DIR%\%CONAN_ARCH%-%CONAN_BUILD_TYPE%-%CONAN_COMPILER%-%CONAN_COMPILER_RUNTIME%-%CONAN_COMPILER_VERSION%"

if not exist %BUILD_DIR% mkdir %BUILD_DIR%
cd %BUILLD_DIR%

if not exist "%VARIANT_DIR%" mkdir "%VARIANT_DIR%"
cd "%VARIANT_DIR%"

conan install %ROOT_DIR% -s arch=%CONAN_ARCH% -s build_type=%CONAN_BUILD_TYPE% -s "compiler=%CONAN_COMPILER%" -s compiler.runtime=%CONAN_COMPILER_RUNTIME% -s compiler.version=%CONAN_COMPILER_VERSION%

conan build %ROOT_DIR%

cd %ROOT_DIR%
